#!/bin/sh

echo "Running pre-commit hook..."

# Check for JavaScript syntax errors
npx eslint --fix --ext .js .
if [ $? -ne 0 ]; then
  echo "❌ JavaScript syntax error(s) found. Commit aborted."
  exit 1
fi

# Check for PHP syntax errors
for file in $(git diff --cached --name-only --diff-filter=AM | grep '\.php$')
do
  php -l "$file"
  if [ $? -ne 0 ]; then
    echo "❌ Syntax error found in PHP file: $file. Commit aborted."
    exit 1
  fi
done

echo "HOOK EXÉCUTÉ"
